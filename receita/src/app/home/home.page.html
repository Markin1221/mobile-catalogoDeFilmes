<ion-header>
  <ion-toolbar color="dark" class="header-custom">
    <ion-title class="titulo-jogo">VALOROSO</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [class.vitoria-bg]="vitoria" class="termo-bg ion-padding">

  <!-- ÃREA SUPERIOR FIXA -->
  <div class="top-area">
    <h2 class="subtitle">Descubra o Agente Secreto!</h2>

    <div class="letras-container" [appShakeOnError]="derrota && !vitoria">
      <div
        class="letra"
        *ngFor="let _ of agenteSecreto.split(''); let i = index"
        [ngClass]="{
          'correta': resultado[i] === '#1cc7d3',
          'parcial': resultado[i] === '#142d74',
          'errada': resultado[i] === '#39334f'
        }"
      >
        {{ letters[i] || '' }}
      </div>
    </div>

    <p *ngIf="vitoria" class="mensagem-vitoria">ğŸ‰ VocÃª acertou o agente! ğŸ‰</p>
    <p *ngIf="derrota && !vitoria" class="mensagem-derrota">âŒ Acabaram as tentativas!</p>
  </div>

  <!-- HISTÃ“RICO DE TENTATIVAS -->
  <div class="tentativas-container" *ngIf="tentativas.length > 0">
    <h3 class="tentativas-titulo">Seus chutes anteriores:</h3>

    <div class="tentativa" *ngFor="let t of tentativas">
      <div
        class="tentativa-letra"
        *ngFor="let l of t.letras; let i = index"
        [ngStyle]="{ 'background-color': t.cores[i] }"
      >
        {{ l }}
      </div>
    </div>
  </div>

  <!-- TELA DE VITÃ“RIA -->
  <div class="overlay-vitoria" *ngIf="vitoria">
    <div class="vitoria-box">
      <p class="mensagem-status">
    {{ vitoria | statusTentativa: derrota }}
  </p>
      <p>VocÃª descobriu o agente secreto: <strong>{{ agenteSecreto }}</strong></p>
      <ion-button expand="block" (click)="buscarAgentes()">Novo Desafio</ion-button>
    </div>
  </div>

  <!-- ÃREA INFERIOR FIXA -->
  <div class="bottom-area">

    <div class="btn-container">
      <ion-button expand="block" color="primary" (click)="buscarAgentes()">
        Buscar Novo Agente
      </ion-button>
    </div>

    <div class="teclado-container">
      <div class="key-row" *ngFor="let row of linhasTeclado">
        <div
          class="key"
          *ngFor="let key of row"
          [ngStyle]="{ 'background-color': teclado[key] || '#1e1e2f' }"
          (click)="cliqueTecla(key)"
        >
          {{ key }}
        </div>
      </div>

      <div class="key-row">
        <div class="key special" (click)="cliqueTecla('BACKSPACE')">âŒ«</div>
        <div class="key special" (click)="cliqueTecla('ENTER')">ENTER</div>
      </div>
    </div>
  </div>

</ion-content>
